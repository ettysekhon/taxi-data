## Run Code in Kestra

Kestra is very versatile and langauge-agnostic. It allows you to write your business logic with your preferred language and run it in a Docker container.

### Run Python Code in Kestra

In the previous section, we've already built a simple task that runs Python code in Kestra which basically uses a container through `io.kestra.plugin.scripts.python.Script`.

There are different ways to run Python code in Kestra. We will show two of them and how to exchange data between tasks.

ðŸ‘‰ More info about [Python in Kestra](https://kestra.io/docs/how-to-guides/python).

#### Simple Inline Python Script flow

Use this link to get to the code and copy it into the flow: [Link to the flow](https://github.com/andkret/kestra-demo/blob/3383d8804ca5ffc1cdd3df5a40fda2c68c1aa60d/dev.testing/flows/2_1/python-data-processing.yaml)

#### Using Namespace Files

This here is the folder where the python and java files live that I use in this lesson:

[Link to the namespace file](https://github.com/andkret/kestra-demo/blob/3383d8804ca5ffc1cdd3df5a40fda2c68c1aa60d/dev.testing/files/process_sales_data.py)

[Link to the flow](https://github.com/andkret/kestra-demo/blob/3383d8804ca5ffc1cdd3df5a40fda2c68c1aa60d/dev.testing/flows/2_1/python-with-namespace-files.yaml)

### Exchange Data Between Tasks

This example uses a simple in line flow again: [Pyhton multistep flow](https://github.com/andkret/kestra-demo/blob/3383d8804ca5ffc1cdd3df5a40fda2c68c1aa60d/dev.testing/flows/2_1/python-multistep.yaml)


### Run Java Code in Kestra

Similar to Python, there are multiple ways available to run Java code.

#### Simple Java (Compile & Run)

This flow compiles and runs Java directly in the container: [Link to the flow](https://github.com/andkret/kestra-demo/blob/3383d8804ca5ffc1cdd3df5a40fda2c68c1aa60d/dev.testing/flows/2_1/java-hello-world.yaml)

> [!IMPORTANT]
> Be aware that Java takes significantly longer than Python. So you may need to wait a few minutes. 

This easy way is using inline Java code which makes it not realistic for more than a quick testing. The code above will simply log 'Hello from Java in Kestra!' and the current time.

#### Java with Namespace Files
Similar to Python, you can also create and maintain the Java code outside of the task and Flow with the help of Namespace files.

[Link to the flow](https://github.com/andkret/kestra-demo/blob/3383d8804ca5ffc1cdd3df5a40fda2c68c1aa60d/dev.testing/flows/2_1/java-with-namespace-files.yaml)

[Link to the Namespace Java file](https://github.com/andkret/kestra-demo/blob/3383d8804ca5ffc1cdd3df5a40fda2c68c1aa60d/dev.testing/files/DataProcessor.java)

This code will write one line for each name to a file `output.txt`. 

#### Maven Project

This option is great for production-grade systems since it allows to specify dependencies easily and create reproducible builds along many other benefits.

Here is what you need:

Use the pom.xml file: [Link to pom.xml](https://github.com/andkret/kestra-demo/blob/3383d8804ca5ffc1cdd3df5a40fda2c68c1aa60d/dev.testing/files/pom.xml)

Create the java file: [Link to the java file](https://github.com/andkret/kestra-demo/tree/3383d8804ca5ffc1cdd3df5a40fda2c68c1aa60d/dev.testing/files/src/main/java/com/example)

Create the flow that uses maven: [Link to the flow](https://github.com/andkret/kestra-demo/blob/3383d8804ca5ffc1cdd3df5a40fda2c68c1aa60d/dev.testing/flows/2_1/java-maven-project.yaml)

The code in this example will show several logs and ultimately save a `output.json` file with three people (name, age, department).


